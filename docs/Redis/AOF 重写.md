
# AOF 重写 REWRITE
BGREWRITEAOF
## 文件太大


## 旧命令合并
### **无须读取旧文件！！！** 现时快照
为了 减少aof文件空间大小

通过读取当前值，写入体积更少的新文件，保证 最终一致

### 子进程
在**子进程**进行 避免使用锁


### 新接收命令：写 AOF 重写缓冲区 
从创建子进程开始，新命令都会另外写入 AOF 重写缓冲区。

### 重写完成
发信号通知父进程
新文件 合并 重写缓冲区, 原子 覆盖 AOF 旧文件